# Group Constant Generation for Godiva Sphere with OpenMC

In this tutorial, I demonstrate how to use OpenMC to generate group constants for Moltres using `moltres_xs.py`.

To run these input files and subsequent group constant generation scripts, the user must install OpenMC (https://github.com/openmc-dev/openmc/). 

### OpenMC Input File 
In this directory, there are 2 OpenMC input files for 900K and 1200K simulations: `godiva_openmc_900.py` and `godiva_openmc_1200.py`. Unlike Scale and Serpent, OpenMC does not have a notion of branches to generate group constants for different temperatures and burnups. Thus, separate input files for different temperatures is required. 

The user must include the `openmc_xs.generate_openmc_tallies_xml()` function in the OpenMC input file to generate a `domain_dict`. The function sets up the OpenMC tallies required for the group constant generation. This is necessary because unlike Serpent, OpenMC does not generate all the group constant data with any simulation, the user must specify what they want. 

For this tutorial, I provide the OpenMC output files: `statepoint_900_openmc.100.h5`, `statepoint_1200_openmc.100.h5`, `summary_900.h5`, and `summary_1200.h5`. Each OpenMC simulation outputs a statepoint and summary file, both output files are required for the group constant generation. 

### moltres_xs.py Input File
`godiva_openmc.inp` is the input file that informs `moltres_xs.py` how to parse the various OpenMC output files to generate Moltres group constants. I explain the structure of the input file: 
```
[TITLE]
  *name of output json file*

[MAT]
  *number of materials*
  *names of materials listed*

[BRANCH]
  *number of branches*
  *material name* *temperature* *file index* *burnup index* *universe index* *branch index*
  
[FILES]
  *number of files*
  *statepoint file name* *openmc* *openmc input file* *summary file*
```
For OpenMC, we do not utilize the burnup and universe indexes, and suggests that users leave it as 1 so that `moltres_xs.py` correctly parses the input file. For OpenMC, we also add additional openmc input files and summary files.  

To generate the Moltres group constants, the user runs: 
```
python ../../python/moltres_xs.py godiva_openmc.inp
```
This will output `godiva_openmc.json` containing the Moltres group constants. An example of this output file can be found in `../../python/test/gold/godiva.json`.



# OpenMC Group Constant Generation 

In this section, I describe how I calculated the group constants generated by OpenMC for Moltres. 
